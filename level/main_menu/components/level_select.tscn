[gd_scene load_steps=37 format=3 uid="uid://c3gtq5mjxutk0"]

[ext_resource type="Script" path="res://level/main_menu/components/level_select.gd" id="1_1qgpx"]
[ext_resource type="Resource" uid="uid://cslvcweyejh3c" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_camera_movement_component.tres" id="1_r18fv"]
[ext_resource type="Resource" uid="uid://iru8ynu04i00" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_camera_rotation_component.tres" id="2_8f4l0"]
[ext_resource type="Shader" path="res://level/main_menu/components/glow.gdshader" id="2_h5bhk"]
[ext_resource type="Resource" uid="uid://rp3mpjmisoyh" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_object_movement_component.tres" id="3_jdaqf"]
[ext_resource type="Resource" uid="uid://c8ulad7utgrg7" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/shader_stages/pre_blur_processing_stage.tres" id="4_5nmis"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/pre_blur_processor.gd" id="5_6fd1t"]
[ext_resource type="Resource" uid="uid://ca45noqewsyvp" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_blur_stage.tres" id="6_sslls"]
[ext_resource type="Resource" uid="uid://cvb65hfs2lrxo" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_neighbor_max_stage.tres" id="7_5bjva"]
[ext_resource type="Resource" uid="uid://bidsfymvdyhek" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_overlay_stage.tres" id="8_5b8v4"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/guertin/guertin_motion_blur.gd" id="9_s43q6"]
[ext_resource type="Resource" uid="uid://dipvwksvqb3dm" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_max_x_stage.tres" id="10_rjonk"]
[ext_resource type="Resource" uid="uid://bxfg45ubc2pv7" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_max_y_stage.tres" id="11_ivh8y"]
[ext_resource type="Resource" uid="uid://bqehecsdgt70s" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_variance_stage.tres" id="12_t15k3"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/base_classes/mb_compositor.gd" id="13_g6mec"]
[ext_resource type="Script" path="res://level/main_menu/components/track.gd" id="15_g7vmh"]
[ext_resource type="ArrayMesh" uid="uid://bfk7xtnfjmic5" path="res://level/main_menu/components/film_reel_segment.obj" id="16_ymr1g"]
[ext_resource type="Texture2D" uid="uid://sv6qersy7e1x" path="res://level/demo/resources/dust.png" id="17_xr5ka"]

[sub_resource type="Environment" id="Environment_ktbl0"]
background_mode = 1
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CompositorEffect" id="CompositorEffect_o67md"]
resource_local_to_scene = false
resource_name = ""
enabled = true
effect_callback_type = 4
needs_motion_vectors = true
needs_normal_roughness = false
script = ExtResource("5_6fd1t")
pre_blur_processor_stage = ExtResource("4_5nmis")
camera_rotation_component = ExtResource("2_8f4l0")
camera_movement_component = ExtResource("1_r18fv")
object_movement_component = ExtResource("3_jdaqf")
debug = false
shader_stages/pre_blur_processor_stage = ExtResource("4_5nmis")

[sub_resource type="CompositorEffect" id="CompositorEffect_kqgcj"]
resource_local_to_scene = false
resource_name = ""
enabled = true
effect_callback_type = 4
needs_motion_vectors = true
needs_normal_roughness = false
script = ExtResource("9_s43q6")
blur_stage = ExtResource("6_sslls")
overlay_stage = ExtResource("8_5b8v4")
tile_max_x_stage = ExtResource("10_rjonk")
tile_max_y_stage = ExtResource("11_ivh8y")
neighbor_max_stage = ExtResource("7_5bjva")
tile_variance_stage = ExtResource("12_t15k3")
tile_size = 40
linear_falloff_slope = 1.0
importance_bias = 40.0
maximum_jitter_value = 0.95
minimum_user_threshold = 1.5
debug = false
shader_stages/blur_stage = ExtResource("6_sslls")
shader_stages/overlay_stage = ExtResource("8_5b8v4")
shader_stages/tile_max_x_stage = ExtResource("10_rjonk")
shader_stages/tile_max_y_stage = ExtResource("11_ivh8y")
shader_stages/neighbor_max_stage = ExtResource("7_5bjva")
shader_stages/tile_variance_stage = ExtResource("12_t15k3")

[sub_resource type="Compositor" id="Compositor_k3f24"]
compositor_effects = Array[CompositorEffect]([SubResource("CompositorEffect_o67md"), SubResource("CompositorEffect_kqgcj")])
script = ExtResource("13_g6mec")
samples = 16
intensity = 1.0
center_fade = 0.0
framerate_independent = true
uncapped_independence = false
target_constant_framerate = 30.0

[sub_resource type="Curve3D" id="Curve3D_wd5g6"]
_data = {
"points": PackedVector3Array(0, -1.38974, -1.05885, 0, 1.38974, 1.05885, 0, 2.51797, -5.87894, 0, -0.485305, -1.50003, 0, 0.485305, 1.50003, 0, 5.60628, -2.57005, 0, 1.52209, -2.58094, 0, -1.52209, 2.58094, 0, 5.23127, 3.40802, 0, 0, 0, 0, 0, 0, 0, 1.26059, 6.62868, 0, 1.27944, 0.926492, 0, -1.27944, -0.926492, 0, -3.41598, 5.68013, 0, 0.507364, 1.65445, 0, -0.507364, -1.65445, 0, -6.15133, 2.23888, 0, -0.860312, 1.54415, 0, 0.860312, -1.54415, 0, -5.44543, -3.36418, 0, 0, 0, 0, 0, 0, 0, -2.1586, -5.79071, 0, -1.38974, -1.05885, 0, 1.38974, 1.05885, 0, 2.51797, -5.87894),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 9

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mwvqc"]
cull_mode = 2
albedo_color = Color(0.0646965, 0.0646965, 0.0646965, 1)

[sub_resource type="MultiMesh" id="MultiMesh_w00wn"]
transform_format = 1
instance_count = 57
mesh = ExtResource("16_ymr1g")
buffer = PackedFloat32Array(-1, 0, 0, 0, 0, 0.599841, -0.80059, 2.79815, 0, -0.800119, -0.599212, -5.66742, -1, 0, 0, 0, 0, 0.602901, -0.797001, 3.36001, 0, -0.797816, -0.603977, -5.24674, -1, 0, 0, 0, 0, 0.632136, -0.772315, 3.91342, 0, -0.774858, -0.63524, -4.81514, -1, 0, 0, 0, 0, 0.692231, -0.716525, 4.44077, 0, -0.721676, -0.697562, -4.35238, -1, 0, 0, 0, 0, 0.779696, -0.617616, 4.91659, 0, -0.626158, -0.78648, -3.83722, -1, 0, 0, 0, 0, 0.874537, -0.473579, 5.30889, 0, -0.484958, -0.880752, -3.2564, -1, 0, 0, 0, 0, 0.947732, -0.314544, 5.5912, 0, -0.319068, -0.949243, -2.61506, -1, 0, 0, 0, 0, 0.956762, -0.288142, 5.80474, 0, -0.290872, -0.957588, -1.94643, -1, 0, 0, 0, 0, 0.973255, -0.224096, 5.98985, 0, -0.229726, -0.974567, -1.26957, -1, 0, 0, 0, 0, 0.990828, -0.127412, 6.11972, 0, -0.135131, -0.99185, -0.580103, -1, 0, 0, 0, 0, 0.999845, -0.00871574, 6.17441, 0, -0.0175924, -0.999962, 0.119103, -1, 0, 0, 0, 0, 0.993965, 0.121964, 6.14177, 0, 0.109702, -0.992535, 0.82687, -1, 0, 0, 0, 0, 0.9724, 0.241691, 6.02135, 0, 0.233319, -0.970353, 1.51094, -1, 0, 0, 0, 0, 0.939144, 0.350745, 5.81798, 0, 0.343523, -0.936471, 2.18217, -1, 0, 0, 0, 0, 0.899758, 0.442324, 5.54319, 0, 0.436389, -0.896855, 2.8278, -1, 0, 0, 0, 0, 0.858447, 0.518461, 5.20928, 0, 0.512902, -0.855101, 3.44504, -1, 0, 0, 0, 0, 0.806321, 0.596949, 4.82145, 0, 0.591478, -0.802279, 4.02991, -1, 0, 0, 0, 0, 0.746136, 0.670889, 4.38003, 0, 0.665794, -0.741558, 4.575, -1, 0, 0, 0, 0, 0.679115, 0.738634, 3.88839, 0, 0.734032, -0.674107, 5.07553, -1, 0, 0, 0, 0, 0.606483, 0.799178, 3.35119, 0, 0.795096, -0.601095, 5.52709, -1, 0, 0, 0, 0, 0.528741, 0.85244, 2.77332, 0, 0.848783, -0.522825, 5.92612, -1, 0, 0, 0, 0, 0.444164, 0.899108, 2.16053, 0, 0.895946, -0.437726, 6.26809, -1, 0, 0, 0, 0, 0.340264, 0.943357, 1.51555, 0, 0.94033, -0.33178, 6.54572, -1, 0, 0, 0, 0, -0.042496, 0.998981, 0.828923, 0, 0.999097, 0.0451224, 6.6162, -1, 0, 0, 0, 0, -0.0785798, 0.9967, 0.128537, 0, 0.996908, 0.0811759, 6.57366, -1, 0, 0, 0, 0, -0.117691, 0.99268, -0.569891, 0, 0.99305, 0.12077, 6.50519, -1, 0, 0, 0, 0, -0.166354, 0.985416, -1.26485, 0, 0.986066, 0.170161, 6.40631, -1, 0, 0, 0, 0, -0.232637, 0.971153, -1.95288, 0, 0.972564, 0.238455, 6.26775, -1, 0, 0, 0, 0, -0.334942, 0.938918, -2.62699, 0, 0.942239, 0.34414, 6.0715, -1, 0, 0, 0, 0, -0.516197, 0.843777, -3.26427, 0, 0.85647, 0.536695, 5.78008, -1, 0, 0, 0, 0, -0.608308, 0.791651, -3.83321, 0, 0.793701, 0.610974, 5.37015, -1, 0, 0, 0, 0, -0.657543, 0.749626, -4.37755, 0, 0.753417, 0.661862, 4.92742, -1, 0, 0, 0, 0, -0.72765, 0.680023, -4.88438, 0, 0.685949, 0.733191, 4.44243, -1, 0, 0, 0, 0, -0.807503, 0.582167, -5.3336, 0, 0.589864, 0.813069, 3.90383, -1, 0, 0, 0, 0, -0.879695, 0.467176, -5.70797, 0, 0.475539, 0.884164, 3.31094, -1, 0, 0, 0, 0, -0.932524, 0.35342, -6.0011, 0, 0.361108, 0.935465, 2.67364, -1, 0, 0, 0, 0, -0.970215, 0.232012, -6.21588, 0, 0.242244, 0.972713, 2.00612, -1, 0, 0, 0, 0, -0.993189, 0.108498, -6.33988, 0, 0.116512, 0.994097, 1.31571, -1, 0, 0, 0, 0, -0.999887, 0.00839101, -6.38488, 0, 0.0150554, 0.999965, 0.615508, -1, 0, 0, 0, 0, -0.997414, -0.0777461, -6.36426, 0, -0.071875, 0.996973, -0.0859545, -1, 0, 0, 0, 0, -0.988519, -0.156583, -6.28571, 0, -0.151094, 0.987665, -0.783294, -1, 0, 0, 0, 0, -0.973666, -0.233475, -6.15268, 0, -0.227979, 0.972363, -1.47234, -1, 0, 0, 0, 0, -0.951527, -0.313408, -5.96505, 0, -0.307564, 0.949619, -2.14857, -1, 0, 0, 0, 0, -0.918434, -0.402236, -5.71902, 0, -0.395574, 0.915536, -2.80571, -1, 0, 0, 0, 0, -0.859862, -0.52419, -5.40566, 0, -0.510527, 0.851601, -3.43294, -1, 0, 0, 0, 0, -0.73879, -0.682787, -4.98489, 0, -0.673936, 0.730617, -3.99313, -1, 0, 0, 0, 0, -0.635912, -0.777149, -4.47446, 0, -0.771761, 0.629317, -4.47427, -1, 0, 0, 0, 0, -0.55245, -0.83708, -3.90943, 0, -0.833546, 0.54708, -4.89029, -1, 0, 0, 0, 0, -0.482756, -0.878351, -3.30841, 0, -0.875755, 0.478016, -5.25311, -1, 0, 0, 0, 0, -0.419016, -0.90951, -2.68165, 0, -0.907979, 0.415682, -5.56967, -1, 0, 0, 0, 0, -0.339996, -0.954752, -2.03374, 0, -0.940427, 0.297402, -5.83188, -1, 0, 0, 0, 0, -0.244269, -0.970676, -1.35732, 0, -0.969708, 0.24039, -6.02357, -1, 0, 0, 0, 0, -0.185528, -0.983452, -0.672376, 0, -0.982639, 0.181169, -6.17487, -1, 0, 0, 0, 0, -0.112854, -0.994279, 0.0216158, 0, -0.993612, 0.106817, -6.28086, -1, 0, 0, 0, 0, -0.0126777, -0.99999, 0.721884, 0, -0.99992, 0.0044023, -6.32721, -1, 0, 0, 0, 0, 0.137425, -0.988622, 1.4221, 0, -0.990512, -0.150423, -6.28766, -1, 0, 0, 0, 0, 0.377985, -0.91688, 2.10023, 0, -0.925812, -0.399162, -6.11374)

[sub_resource type="SphereMesh" id="SphereMesh_pbml7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4tc11"]
emission_enabled = true
emission = Color(0.875115, 0, 0.421801, 1)
emission_energy_multiplier = 16.0

[sub_resource type="QuadMesh" id="QuadMesh_u78mf"]
size = Vector2(20, 10)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3g02s"]
render_priority = 0
shader = ExtResource("2_h5bhk")

[sub_resource type="Curve" id="Curve_3lf0q"]
_data = [Vector2(1e-05, 0), 0.0, 0.0, 0, 0, Vector2(0.252778, 1), 0.0, 0.0, 0, 0, Vector2(0.502778, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_6x1du"]
curve = SubResource("Curve_3lf0q")

[sub_resource type="Curve" id="Curve_h111m"]
max_value = 3.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.6), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_o8x88"]
curve = SubResource("Curve_h111m")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_cg1eb"]
emission_shape = 3
emission_box_extents = Vector3(5, 2, 2)
angle_min = 1.07288e-05
angle_max = 180.0
radial_velocity_min = -0.0500223
radial_velocity_max = 0.0499776
gravity = Vector3(0, 0, 0)
scale_over_velocity_curve = SubResource("CurveTexture_o8x88")
color = Color(1, 1, 1, 0.0784314)
alpha_curve = SubResource("CurveTexture_6x1du")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kwna4"]
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("17_xr5ka")
shadow_to_opacity = true
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
distance_fade_mode = 1
distance_fade_max_distance = 3.0

[sub_resource type="QuadMesh" id="QuadMesh_hp4hm"]
material = SubResource("StandardMaterial3D_kwna4")
size = Vector2(0.05, 0.05)

[node name="LevelSelect" type="Node3D"]
script = ExtResource("1_1qgpx")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0.499406, -0.724661, 0.474828, -0.0244424, 0.536064, 0.843824, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ktbl0")
compositor = SubResource("Compositor_k3f24")

[node name="Camera3D" type="Camera3D" parent="."]

[node name="Track" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4.608)
curve = SubResource("Curve3D_wd5g6")
script = ExtResource("15_g7vmh")

[node name="MultiMeshInstance3D" type="MultiMeshInstance3D" parent="Track"]
transform = Transform3D(1, 0, 0, 0, 0.766667, -0.64212, 0, 0.64212, 0.766667, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_mwvqc")
cast_shadow = 0
multimesh = SubResource("MultiMesh_w00wn")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Track"]
mesh = SubResource("SphereMesh_pbml7")
surface_material_override/0 = SubResource("StandardMaterial3D_4tc11")

[node name="Background" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0108192, 0, -5.05442)
cast_shadow = 0
gi_mode = 0
mesh = SubResource("QuadMesh_u78mf")
surface_material_override/0 = SubResource("ShaderMaterial_3g02s")

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.02012, 0, -1.19647)
visible = false
cast_shadow = 0
amount = 512
lifetime = 5.0
preprocess = 5.0
randomness = 0.5
process_material = SubResource("ParticleProcessMaterial_cg1eb")
draw_pass_1 = SubResource("QuadMesh_hp4hm")

[connection signal="curve_changed" from="Track" to="Track" method="_on_curve_changed"]
