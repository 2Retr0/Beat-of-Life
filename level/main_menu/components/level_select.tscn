[gd_scene load_steps=33 format=3 uid="uid://c3gtq5mjxutk0"]

[ext_resource type="Script" path="res://level/main_menu/components/level_select.gd" id="1_1qgpx"]
[ext_resource type="Texture2D" uid="uid://cf2k7kwrjuhh" path="res://level/main_menu/components/film_reel.png" id="1_8k03p"]
[ext_resource type="Resource" uid="uid://cslvcweyejh3c" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_camera_movement_component.tres" id="1_r18fv"]
[ext_resource type="Resource" uid="uid://iru8ynu04i00" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_camera_rotation_component.tres" id="2_8f4l0"]
[ext_resource type="Shader" path="res://level/main_menu/components/glow.gdshader" id="2_h5bhk"]
[ext_resource type="Resource" uid="uid://rp3mpjmisoyh" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/resources/default_object_movement_component.tres" id="3_jdaqf"]
[ext_resource type="Resource" uid="uid://c8ulad7utgrg7" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/shader_stages/pre_blur_processing_stage.tres" id="4_5nmis"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/pre_blur_processing/pre_blur_processor.gd" id="5_6fd1t"]
[ext_resource type="Resource" uid="uid://ca45noqewsyvp" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_blur_stage.tres" id="6_sslls"]
[ext_resource type="Resource" uid="uid://cvb65hfs2lrxo" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_neighbor_max_stage.tres" id="7_5bjva"]
[ext_resource type="Resource" uid="uid://bidsfymvdyhek" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_overlay_stage.tres" id="8_5b8v4"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/guertin/guertin_motion_blur.gd" id="9_s43q6"]
[ext_resource type="Resource" uid="uid://dipvwksvqb3dm" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_max_x_stage.tres" id="10_rjonk"]
[ext_resource type="Resource" uid="uid://bxfg45ubc2pv7" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_max_y_stage.tres" id="11_ivh8y"]
[ext_resource type="Resource" uid="uid://bqehecsdgt70s" path="res://addons/sphynx_motion_blur_toolkit/guertin/shader_stages/guertin_tile_variance_stage.tres" id="12_t15k3"]
[ext_resource type="Script" path="res://addons/sphynx_motion_blur_toolkit/base_classes/mb_compositor.gd" id="13_g6mec"]
[ext_resource type="Texture2D" uid="uid://sv6qersy7e1x" path="res://level/demo/resources/dust.png" id="17_xr5ka"]

[sub_resource type="Environment" id="Environment_ktbl0"]
background_mode = 1
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CompositorEffect" id="CompositorEffect_o67md"]
resource_local_to_scene = false
resource_name = ""
enabled = true
effect_callback_type = 4
needs_motion_vectors = true
needs_normal_roughness = false
script = ExtResource("5_6fd1t")
pre_blur_processor_stage = ExtResource("4_5nmis")
camera_rotation_component = ExtResource("2_8f4l0")
camera_movement_component = ExtResource("1_r18fv")
object_movement_component = ExtResource("3_jdaqf")
debug = false
shader_stages/pre_blur_processor_stage = ExtResource("4_5nmis")

[sub_resource type="CompositorEffect" id="CompositorEffect_kqgcj"]
resource_local_to_scene = false
resource_name = ""
enabled = true
effect_callback_type = 4
needs_motion_vectors = true
needs_normal_roughness = false
script = ExtResource("9_s43q6")
blur_stage = ExtResource("6_sslls")
overlay_stage = ExtResource("8_5b8v4")
tile_max_x_stage = ExtResource("10_rjonk")
tile_max_y_stage = ExtResource("11_ivh8y")
neighbor_max_stage = ExtResource("7_5bjva")
tile_variance_stage = ExtResource("12_t15k3")
tile_size = 40
linear_falloff_slope = 1.0
importance_bias = 40.0
maximum_jitter_value = 0.95
minimum_user_threshold = 1.5
debug = false
shader_stages/blur_stage = ExtResource("6_sslls")
shader_stages/overlay_stage = ExtResource("8_5b8v4")
shader_stages/tile_max_x_stage = ExtResource("10_rjonk")
shader_stages/tile_max_y_stage = ExtResource("11_ivh8y")
shader_stages/neighbor_max_stage = ExtResource("7_5bjva")
shader_stages/tile_variance_stage = ExtResource("12_t15k3")

[sub_resource type="Compositor" id="Compositor_k3f24"]
compositor_effects = Array[CompositorEffect]([SubResource("CompositorEffect_o67md"), SubResource("CompositorEffect_kqgcj")])
script = ExtResource("13_g6mec")
samples = 16
intensity = 1.0
center_fade = 0.0
framerate_independent = true
uncapped_independence = false
target_constant_framerate = 30.0

[sub_resource type="Curve3D" id="Curve3D_wd5g6"]
_data = {
"points": PackedVector3Array(0, 0.529412, 0.432353, 0, -0.529412, -0.432353, 0, 1.39005, -2.12335, 0, 0.432353, -0.458824, 0, -0.432353, 0.458824, 0, -1.65406, -2.04393, 0, -0.0529411, -0.555882, 0, 0.0529411, 0.555882, 0, -2.0423, -0.0145231, 0, -0.282353, -0.291176, 0, 0.282353, 0.291176, 0, -1.37171, 1.96195, 0, -0.564705, 0.176471, 0, 0.564705, -0.176471, 0, 1.38123, 2.209, 0, 0.0352941, 0.697059, 0, -0.0352941, -0.697059, 0, 2.36064, -0.102759, 0, 0, 0, 0, 0, 0, 0, 1.39005, -2.12335),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0)
}
point_count = 7

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hh24a"]
disable_ambient_light = true
disable_fog = true
albedo_texture = ExtResource("1_8k03p")
clearcoat = 0.18
uv1_scale = Vector3(1.75, 7.61, 1)
uv1_offset = Vector3(0, -1.82, 0)
disable_receive_shadows = true

[sub_resource type="QuadMesh" id="QuadMesh_u78mf"]
size = Vector2(20, 10)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3g02s"]
render_priority = 0
shader = ExtResource("2_h5bhk")

[sub_resource type="Curve" id="Curve_3lf0q"]
_data = [Vector2(1e-05, 0), 0.0, 0.0, 0, 0, Vector2(0.252778, 1), 0.0, 0.0, 0, 0, Vector2(0.502778, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_6x1du"]
curve = SubResource("Curve_3lf0q")

[sub_resource type="Curve" id="Curve_h111m"]
max_value = 3.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.6), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_o8x88"]
curve = SubResource("Curve_h111m")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_cg1eb"]
emission_shape = 3
emission_box_extents = Vector3(5, 2, 2)
angle_min = 1.07288e-05
angle_max = 180.0
radial_velocity_min = -0.0500223
radial_velocity_max = 0.0499776
gravity = Vector3(0, 0, 0)
scale_over_velocity_curve = SubResource("CurveTexture_o8x88")
color = Color(1, 1, 1, 0.0784314)
alpha_curve = SubResource("CurveTexture_6x1du")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kwna4"]
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("17_xr5ka")
shadow_to_opacity = true
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
distance_fade_mode = 1
distance_fade_max_distance = 3.0

[sub_resource type="QuadMesh" id="QuadMesh_hp4hm"]
material = SubResource("StandardMaterial3D_kwna4")
size = Vector2(0.05, 0.05)

[node name="LevelSelect" type="Node3D"]
script = ExtResource("1_1qgpx")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0.499406, -0.724661, 0.474828, -0.0244424, 0.536064, 0.843824, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ktbl0")
compositor = SubResource("Compositor_k3f24")

[node name="Camera3D" type="Camera3D" parent="."]

[node name="Track" type="Path3D" parent="."]
curve = SubResource("Curve3D_wd5g6")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Track"]
transform = Transform3D(1, 0, 0, 0, 0.0359016, -0.999351, 0, 0.999351, 0.0359016, -0.5, 0, 0)
cast_shadow = 0
polygon = PackedVector2Array(0, 0, 0, 0.001, 1, 0.001, 1, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 16.5
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = true
material = SubResource("StandardMaterial3D_hh24a")

[node name="Background" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -3.97663)
cast_shadow = 0
gi_mode = 0
mesh = SubResource("QuadMesh_u78mf")
surface_material_override/0 = SubResource("ShaderMaterial_3g02s")

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.02012, 0, -1.19647)
visible = false
cast_shadow = 0
amount = 512
lifetime = 5.0
preprocess = 5.0
randomness = 0.5
process_material = SubResource("ParticleProcessMaterial_cg1eb")
draw_pass_1 = SubResource("QuadMesh_hp4hm")

[connection signal="curve_changed" from="Track" to="Track" method="_on_curve_changed"]
